<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Glam Loading</title>
  <style>
    :root{
      --ease: cubic-bezier(.18,.8,.2,1);
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background:#000;
      color:#f5f5f5;
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      overflow:hidden;
    }

    .wrap{
      position:relative;
      display:flex;
      flex-direction:column;
      align-items:center;
      text-align:center;
      gap:18px;
      padding:0 24px;
      background:transparent;
      box-shadow:none;
      border-radius:0;
      width:100%;
      max-width:520px;
    }

    .title{
      font-size:clamp(13px,2.5vw,16px);
      letter-spacing:0.22em;
      text-transform:uppercase;
      opacity:.8;
    }

    .percent{
      font-size:clamp(26px,4.2vw,32px);
      font-weight:800;
      letter-spacing:0.18em;
      text-transform:uppercase;
      text-shadow:0 2px 12px #000;
    }

    .percent span{
      font-variant-numeric:tabular-nums;
    }

    /* ===== 입체적인 로딩바 + 반짝이 ===== */
    .bar-shell{
      position:relative;
      margin-top:10px;
      width:min(80vw,420px);
      height:26px;
      border-radius:999px;
      background:
        linear-gradient(145deg,#050505 0%,#151515 30%,#272727 70%,#050505 100%);
      box-shadow:
        inset 0 1px 1px #ffffff33,
        inset 0 -3px 5px #000000e0,
        0 14px 32px #000000f0;
      overflow:visible;
    }

    .bar-shell::before{
      content:"";
      position:absolute;
      inset:2px 3px auto 3px;
      height:5px;
      border-radius:999px;
      background:linear-gradient(90deg,transparent,#ffffff88,transparent);
      opacity:.9;
      pointer-events:none;
    }

    .bar-shell::after{
      content:"";
      position:absolute;
      left:14%;
      right:14%;
      bottom:-18px;
      height:22px;
      border-radius:50%;
      background:radial-gradient(ellipse at center,#000000d0,transparent 70%);
      pointer-events:none;
    }

    .bar-fill{
      position:absolute;
      inset:3px;
      width:0%;
      border-radius:999px;
      background:
        linear-gradient(90deg,#ffffff 0%,#e0e0e0 18%,#b0b0b0 40%,#f5f5f5 65%,#c0c0c0 100%);
      box-shadow:
        0 0 16px #ffffffaa,
        0 0 40px #ffffff55;
      transition:width 120ms var(--ease);
      z-index:1;
    }

    .bar-fill::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        linear-gradient(120deg,transparent 0%,#ffffff55 40%,transparent 80%);
      mix-blend-mode:screen;
      opacity:.65;
    }

    /* 반짝이 파티클이 올라갈 레이어 */
    .spark-layer{
      position:absolute;
      left:0;
      right:0;
      top:-38px;
      bottom:0;
      pointer-events:none;
      mix-blend-mode:screen;
      z-index:2;
    }

    .spark{
      position:absolute;
      width:4px;
      height:4px;
      border-radius:50%;
      background:radial-gradient(circle,#ffffff 0,#ffe9ff 35%,transparent 70%);
      box-shadow:
        0 0 8px #ffffffcc,
        0 0 18px #ffb3ffaa;
      animation:spark-fly 950ms ease-out forwards;
    }

    @keyframes spark-fly{
      0%{
        transform:translate3d(0,0,0) scale(0.2);
        opacity:0;
      }
      20%{
        transform:translate3d(0,-4px,0) scale(0.6);
        opacity:1;
      }
      60%{
        transform:translate3d(4px,-18px,0) scale(1);
        opacity:0.9;
      }
      100%{
        transform:translate3d(8px,-30px,0) scale(1.1);
        opacity:0;
      }
    }

    .sub{
      margin-top:10px;
      font-size:clamp(11px,1.9vw,13px);
      opacity:.7;
      letter-spacing:0.08em;
    }

    @media (max-width:520px){
      .wrap{ padding:0 16px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="title">Glam concept</div>
    <div class="percent">Loding... <span id="percentText">00%</span></div>

    <div class="bar-shell">
      <div class="bar-fill" id="barFill"></div>
      <div class="spark-layer" id="sparkLayer"></div>
    </div>

    <div class="sub">Preparing your glam stage...</div>
  </div>

  <script>
    const percentText = document.getElementById("percentText");
    const barFill = document.getElementById("barFill");
    const sparkLayer = document.getElementById("sparkLayer");

    let p = 0;

    function spawnSparks(intensity){
      if (!sparkLayer) return;

      const base = Math.max(2, intensity * 2);
      const count = base + Math.floor(Math.random() * base);

      for (let i = 0; i < count; i++){
        const s = document.createElement("div");
        s.className = "spark";

        // 진행되는 끝부분(p%) 근처에서만 반짝이 나오게
        const jitter = (Math.random() - 0.5) * 4; // -2 ~ 2 정도 좌우로 퍼지게
        let tip = p + jitter;
        tip = Math.max(0, Math.min(100, tip));
        s.style.left = tip + "%";

        // 바 위쪽에서 살짝 시작해서 위로 튀어오르는 느낌
        s.style.bottom = "8%";
        s.style.animationDuration = (650 + Math.random() * 450) + "ms";
        s.style.opacity = (0.6 + Math.random() * 0.35).toFixed(2);

        sparkLayer.appendChild(s);

        setTimeout(() => {
          s.remove();
        }, 1300);
      }
    }

    const tick = () => {
      const step = Math.floor(Math.random() * 9) + 4; // 4 ~ 12%
      p = Math.min(100, p + step);

      const shown = p.toString().padStart(2, "0") + "%";
      percentText.textContent = shown;
      barFill.style.width = p + "%";

      // 진행률에 따라 반짝이 양을 살짝 늘림
      const intensity = p < 40 ? 2 : p < 75 ? 5 : 12;
      spawnSparks(intensity);

      if (p >= 100) {
        setTimeout(() => {
          window.location.href = "main.html";
        }, 450);
      } else {
        setTimeout(tick, 90);
      }
    };

    setTimeout(tick, 220);
  </script>
</body>
</html>
